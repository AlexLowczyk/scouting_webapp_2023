<html>
    <head>
        <title>Level 1 Scouting</title>
        <link rel="icon" type="image/x-icon" href="logo.ico">
        <link rel="stylesheet" href="level1.css">
    </head>
    <body onload="startup()">
        <div id="question">
            <div id="header" style="display: none;"> 
                <table align="center" id="headerTable">
                    <tr>
                        <td><button onclick="lastBox()" id="headerButton">Previous</button></td> 
                        <td style="text-align: center;width: 200px; font-weight: bold; font-size: larger;" id="headerText"><h1 >Title</h1></td>
                        <td><button onclick="nextBox()" id="headerButton">Next</button></td> 
                    </tr>
                    <tr>
                        <th colspan="3" id="blue" style="text-align: center;">254 - The Cheesy Poofs</th>
                    </tr>
                </table>
            </div>
            <div id="home">
                <h1 style="text-align: center;">Welcome to Level 1 Scouting!</h1>
                <h2 style="text-align: center;">Match #</h2>
                <h2 style="text-align: center; color: blue;">Team 254: The Cheesy Poofs</h2>
                <h3 style="text-align: center;">Scouter Name: <select style="align-items: center;width: 250px;"></select></h3>
                <table id-"homeTable" align="center">
                    <tr>
                        <th id="blue" style="width: 75px;">Blue Alliance</th>
                        <td rowspan="4"><img src="https://cdn.discordapp.com/attachments/1020128727994224700/1068692349493977158/image.png" height="200px"></img></td>
                        <th id="red" style="width: 75px;">Red Alliance</th>
                    </tr>
                    <tr>
                        <td id="blue">254</td>
                        <td id="red">195</td>
                    </tr>
                    <tr>
                        <td id="blue">1678</td>
                        <td id="red">1114</td>
                    </tr>
                    <tr>
                        <td id="blue">4414</td>
                        <td id="red">2056</td>
                    </tr>
                </table>
                <div style="height: 20px;"></div>
                <button onclick="nextBox()" style="margin: 0 auto; display: block;" id="initialNext">Next</button>
            </div>
            <div id="pre" style="display: none;">
                <form>
                    <p><b>Preload?</b></p>
                    <input type="radio" id="Yes" name="preload" value="1">
                    <label for="Yes">Yes</label><br>
                    <input type="radio" id="No" name="preload" value="0">
                    <label for="No">No</label><br>
                </form>
            </div>
            <div id="auto" style="display: none;">
                <p></p>
                <table id="nodeTable"></table>
                <br>
                <table id="autoDropdownTable" border="0">
                    <tr>
                        <td>
                            <form>
                                <label for="moveBns"><h2>Move Bonus:</h2></label>
                                <p></p>
                                <select name="moveBns" id="moveBns">
                                    <option value="0">Did not move</option>
                                    <option value="1">Move w/o bonus</option>
                                    <option value="3">Move w/ bonus</option>
                                </select>
                            </form>
                        </td>
                        <td>
                            <form>
                                <label for="chargestn"><h2>Charge Station:</h2></label>
                                <p></p>
                                <select name="chargestn" id="chargestn">
                                    <option value="0">No attempt</option>
                                    <option value="1">Failed attempt</option>
                                    <option value="3">Docked no engage</option>
                                    <option value="4">Docked w/ engage</option>
                                </select>
                            </form>
                        </td>
                        <td>
                            <form>
                                <label for="penalties"><h2>Penalties:</h2></label>
                                <p></p>
                                <select name="penalties" id="penalties">
                                    <option value="0">No penalties</option>
                                    <option value="1">Crossed Line</option>
                                    <option value="3">Touched Pieces</option>
                                </select>
                            </form>
                        </td>
                    </tr>
                </table>
                <br>
                <h2 style="text-align: center;">Pickup Positions</h2>
                <table id="autoPickupTable" border="0">
                    <tr>
                        <td><button class="pickup" id="pickup1" onclick="pickupSelection(1)"></button></td>
                        <td><button class="pickup" id="pickup2" onclick="pickupSelection(2)"></button></td>
                        <td><button class="pickup" id="pickup3" onclick="pickupSelection(3)"></button></td>
                        <td><button class="pickup" id="pickup4" onclick="pickupSelection(4)"></button></td>
                    </tr>
                </table>
            </div>
            <div id="tele" style="display: none;">
                Tele operated
            </div>
            <div id="end" style="display: none;">
                Endgame
            </div>
            <div id="post" style="display: none;">
                Post Game
            </div>
            <div id="final" style="display: none;">
                Final Screen
                <button onclick="returnBox()" style="margin: 0 auto; display: block;" id="initialNext">Return</button>    
            </div>
        </div>
    </body>







    <script>
        var stage=0; //variable to keep track of what is currently being displayed
        var numberBox=6; //static value for total number of boxes - 1
        const nodePositions = new Array(4); //array of positions of selected nodes
        var nodesSelected=0; 
        const autoPickup = new Array(4); //array of which pickup locations selected


        function startup(){ //set up auto nodes when the website is opened
            table = document.getElementById("nodeTable"); //find table
            var counter = 1; //variable to count and assign numbers to cells
            for(var i = 0; i < 3; i++){ //loop to make rows
                var row = table.insertRow(i); //insert row into table
                for(var t = 0; t < 9; t++){ //loop to make cells
                    var cell = row.insertCell(t); // insert cell into row
                    var newNode = document.createElement("button"); //make a button
                    newNode.id = "node" + counter; //assign it a name and a id
                    newNode.name = "node"; //use the name to format all button in the css code
                    if ((t==1 || t==4 || t==7) & i < 2) { //assign buttons a type depending on if they are in the community co op zone
                        newNode.classList.add("cube");
                    } else if(i < 2) {
                        newNode.classList.add("cone");
                    } 
                    else {
                        newNode.classList.add("other");
                    }
                    newNode.innerHTML = counter; //set the button text to its number
                    newNode.setAttribute("onclick", "assignNodeArray(" + (counter) + ")"); //add the function that will happen when the button is clicked, idk what to name it so i called it harish
                    cell.appendChild(newNode); //put the button in the cell that we made
                    counter++; //increment the number by 1
                }
            }
            for (i=0;i < nodePositions.length; i++){ //assign vallues to node value array
                nodePositions[i] = 0;
            }
            for (i=0;i<autoPickup.length;i++){
                autoPickup[i]=0;
            }
        }

        function pickupSelection(pickupLocation){
            button = document.getElementById("pickup" + pickupLocation);
            if (autoPickup[pickupLocation - 1]==0){
                autoPickup[pickupLocation - 1]=1;
                button.style.backgroundColor="green";
            } else {
                autoPickup[pickupLocation - 1]=0;
                button.style.backgroundColor="gray";
            }
            console.log(autoPickup);
        }

        function assignNodeArray(nodeNumber){
            console.log(nodeNumber);
            button = document.getElementById("node" + (nodeNumber))
            if (nodesSelected <= 3){
                if (button.style.backgroundColor=="green"){//if already selected
                    if (button.classList.contains("cone")){
                        button.style.backgroundColor = "yellow"; //sets it back to cyan if its in the middle
                    } else if (button.classList.contains("cube")){
                        button.style.backgroundColor = "purple";
                    } else {
                        button.style.backgroundColor = "gray";//sets it to gray otherwise
                    }
                    for (i=0;i<nodePositions.length;i++){
                        if (nodePositions[i]==nodeNumber){
                            nodePositions[i]=0;
                        }
                    }
                    nodesSelected--;
                } else {
                    button.style.backgroundColor="green";
                    for (i=0;i<nodePositions.length;i++){
                        if (nodePositions[i]==0){
                            nodePositions[i]=nodeNumber;
                            { break; }
                        }
                    }
                    nodesSelected++;
                }
            
            }else {
                if (button.style.backgroundColor=="green"){//if already selected
                    if (button.classList.contains("cone")){
                        button.style.backgroundColor = "yellow"; //sets it back to cyan if its in the middle
                    } else if (button.classList.contains("cube")){
                        button.style.backgroundColor = "purple";
                    } else {
                        button.style.backgroundColor = "gray";//sets it to gray otherwise
                    }
                    for (i=0;i<nodePositions.length;i++){
                        if (nodePositions[i]==nodeNumber){
                            nodePositions[i]=0;
                        }
                    }
                    nodesSelected--;
                } else {
                    alert("Error, please select less than 5 nodes at a time")
                }
            }
            document.getElementById("nodeDiv").innerHTML = "nodes selected: " + nodesSelected + " Node Positions:" + nodePositions; //test code
            /* if (nodeValues[nodeNumber]==0){ //if the node is 0, change to green and set to 1
                    nodeValues[nodeNumber]=1;
                    button.style.backgroundColor = "green";
                    nodesSelected++;
                } else { //if node is 1, set node to 0 and original color
                    nodeValues[nodeNumber]=0;
                    if (button.classList.contains("cone")){
                        button.style.backgroundColor = "yellow"; //sets it back to cyan if its in the middle
                    } else if (button.classList.contains("cube")){
                        button.style.backgroundColor = "purple";
                    } else {
                        button.style.backgroundColor = "gray";//sets it to gray otherwise
                    }
                    nodesSelected--;
                }  */
        }

        function nextBox(){ //increment stage by one till a max and update boxes
            stage++;
            if (stage > numberBox){
                stage = numberBox;
            }
            console.log(stage);
            updateBox();
        }

        function lastBox(){ //de increment stage by one till 0 and updates boxes
            stage--;
            if (stage < 0){
                stage = 0;
            }
            updateBox();
        }

        function returnBox(){
            stage = 0;
            updateBox();
        }

        function updateBox(){
            homeBox = document.getElementById("home"); //get each box object
            preBox = document.getElementById("pre");
            autoBox = document.getElementById("auto");
            teleBox = document.getElementById("tele");
            endBox = document.getElementById("end");
            postBox = document.getElementById("post");
            finalBox = document.getElementById("final");
            header = document.getElementById("header");
            headerText = document.getElementById("headerText");
            homeBox.style.display = "none"; //set each box invisible
            preBox.style.display = "none";
            autoBox.style.display = "none";
            teleBox.style.display = "none"; 
            endBox.style.display = "none";
            postBox.style.display = "none";
            finalBox.style.display = "none";
            if (stage == 0){ //make one box visible
                homeBox.style.display = "block";
                header.style.display = "none"; //hide header
            } else if(stage == 1){
                preBox.style.display = "block";
                header.style.display = "block"; //show header
                headerText.innerHTML = "Pre Game"; //set header text
            } else if(stage == 2){
                autoBox.style.display = "block";
                headerText.innerHTML = "Auto";
            } else if(stage == 3){
                teleBox.style.display = "block";
                headerText.innerHTML = "Tele";
            } else if(stage == 4){
                endBox.style.display = "block";
                headerText.innerHTML = "End Game";
            } else if(stage == 5){
                postBox.style.display = "block";
                headerText.innerHTML = "Post Game";
            } else if(stage == 6){
                finalBox.style.display = "block";
                header.style.display = "none"; //hide header
            }
        }
    </script>
</html>